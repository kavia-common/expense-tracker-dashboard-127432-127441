{"is_source_file": true, "format": "JavaScript", "description": "This file defines the DatabaseService class responsible for managing SQLite database connections, creating tables and indexes, executing queries, and closing the connection in a Node.js backend for an expense tracker application.", "external_files": ["sqlite3", "path", "fs"], "external_methods": ["require('sqlite3').verbose()", "path.dirname()", "fs.existsSync()", "fs.mkdirSync()"], "published": ["module.exports"], "classes": [{"name": "DatabaseService", "description": "A class encapsulating SQLite database connection management, table creation, query execution, and connection closing."}], "methods": [{"name": "constructor()", "description": "Initializes the DatabaseService instance and triggers database initialization.", "scope": "DatabaseService", "scopeKind": "class"}, {"name": "init()", "description": "Sets up the database path, creates necessary directories, and establishes a connection to the SQLite database.", "scope": "DatabaseService", "scopeKind": "class"}, {"name": "createTables()", "description": "Creates the required database tables and indexes if they do not already exist.", "scope": "DatabaseService", "scopeKind": "class"}, {"name": "initializeTables()", "description": "Public method to synchronously initialize the database tables, primarily for testing purposes.", "scope": "DatabaseService", "scopeKind": "class"}, {"name": "run(sql, params = [])", "description": "Executes an SQL statement with parameters and returns a promise resolving with the result.", "scope": "DatabaseService", "scopeKind": "class"}, {"name": "get", "description": "Retrieves a single row from the database based on the SQL query and parameters."}, {"name": "all(sql, params = [])", "description": "Retrieves all rows matching the SQL query and parameters from the database.", "scope": "DatabaseService", "scopeKind": "class"}, {"name": "close()", "description": "Closes the database connection.", "scope": "DatabaseService", "scopeKind": "class"}, {"name": "AnonymousFunction011fb0a00100(err)", "scope": "DatabaseService.run", "scopeKind": "function", "description": "unavailable"}], "calls": ["this.createTables()", "this.db.run()", "this.db.get()", "this.db.all()", "fs.existsSync()", "fs.mkdirSync()", "path.dirname()"], "search-terms": ["sqlite3 database setup", "create tables expense tracker", "magic_links table", "connection handling", "async database queries", "Node.js SQLite service"], "state": 2, "file_id": 14, "knowledge_revision": 90, "git_revision": "", "revision_history": [{"29": ""}, {"80": ""}, {"81": ""}, {"88": ""}, {"89": ""}, {"90": ""}], "ctags": [{"_type": "tag", "name": "AnonymousFunction011fb0a00100", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^      this.db.run(sql, params, function(err) {$/", "language": "JavaScript", "kind": "function", "signature": "(err)", "scope": "DatabaseService.run", "scopeKind": "function"}, {"_type": "tag", "name": "DatabaseService", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^class DatabaseService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^  all(sql, params = []) {$/", "language": "JavaScript", "kind": "method", "signature": "(sql, params = [])", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "close", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^  close() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^  constructor() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "createTables", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^  async createTables() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^module.exports = new DatabaseService();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "fs", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^const fs = require('fs');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "init", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^  init() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "initializeTables", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^  async initializeTables() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "params", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^  get(sql, params = []) {$/", "language": "JavaScript", "kind": "field", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^const path = require('path');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "run", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^  run(sql, params = []) {$/", "language": "JavaScript", "kind": "method", "signature": "(sql, params = [])", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "sql", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^  get(sql, params = []) {$/", "language": "JavaScript", "kind": "field", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "sqlite3", "path": "/home/kavia/workspace/code-generation/expense-tracker-dashboard-127432-127441/expense_tracker_backend/src/services/database.js", "pattern": "/^const sqlite3 = require('sqlite3').verbose();$/", "language": "JavaScript", "kind": "constant"}], "hash": "eb02cb7bc50a50103fcc51a7defce7f6", "format-version": 4, "code-base-name": "expense_tracker_backend", "filename": "expense_tracker_backend/src/services/database.js", "fields": [{"name": "module.exports = new DatabaseService();", "scope": "module", "scopeKind": "class", "description": "unavailable"}, {"name": "get(sql, params = []) {", "scope": "DatabaseService", "scopeKind": "class", "description": "unavailable"}]}